<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Malla Curricular Arquitectura</title>

<style>
/* (TODO TU CSS LO DEJ√â IGUAL ‚Äî SOLO A√ëAD√ç ESTE POQUITO PARA EL LOGIN) */

#authBox, #userBox{
  max-width: 420px;
  margin: 0 auto 20px;
  padding: 15px;
  background:#eef4e6;
  border-radius:12px;
}

#authBox input{
  width: 95%;
  padding: 8px;
  margin: 5px 0;
  border-radius: 8px;
  border: 1px solid #ccc;
}
</style>
</head>

<body>

<h1>MALLA CURRICULAR ARQUITECTURA</h1>

<!-- üî• LOGIN UI -->
<div id="authBox">
  <h3>Ingresar o crear cuenta</h3>

  <input id="email" type="email" placeholder="Correo electr√≥nico">
  <input id="pass" type="password" placeholder="Contrase√±a">

  <button id="loginBtn">Iniciar sesi√≥n</button>
  <button id="registerBtn">Crear cuenta</button>
  <button id="googleBtn">Entrar con Google</button>
  <button id="recoverBtn">Recuperar contrase√±a</button>
</div>

<div id="userBox" style="display:none;">
  <p>Sesi√≥n iniciada como: <span id="userEmail"></span></p>
  <button id="logoutBtn">Cerrar sesi√≥n</button>
</div>

<!-- üî• TU C√ìDIGO DE LA MALLA (NO LO TOQU√â) -->
<div class="progreso-container">
  <div class="progreso-bar">
    <div class="progreso-fill" id="progresoFill"></div>
  </div>
  <div id="porcentajeProgreso">Progreso: 0%</div>
  <div class="mensaje-motivacion" id="mensajeMotivacion">Todo gran proyecto empieza con una idea üå±</div>
  <button id="reiniciarBtn">Reiniciar progreso</button>
</div>

<div class="malla" id="malla"></div>

<script>
/* üî• TU SCRIPT DE LA MALLA ‚Äî (LO DEJ√â IGUAL) */
... üëà (todo tu script completo aqu√≠, tal cual lo ten√≠as)
</script>

<!-- üî• FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { 
  getAuth, 
  signInWithEmailAndPassword, 
  createUserWithEmailAndPassword,
  GoogleAuthProvider,
  signInWithPopup,
  sendPasswordResetEmail,
  onAuthStateChanged,
  signOut
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDGFEsBWnEHP3luKaeaFzUe_Nguqz3j_pA",
  authDomain: "malla-curricular-arquitectura.firebaseapp.com",
  projectId: "malla-curricular-arquitectura",
  storageBucket: "malla-curricular-arquitectura.firebasestorage.app",
  messagingSenderId: "613677284410",
  appId: "1:613677284410:web:92297cf4c86a6f6c378903",
  measurementId: "G-YN189BKMCH"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

/* ------- REFERENCIAS -------- */
const email = document.getElementById("email");
const pass = document.getElementById("pass");
const loginBtn = document.getElementById("loginBtn");
const registerBtn = document.getElementById("registerBtn");
const googleBtn = document.getElementById("googleBtn");
const recoverBtn = document.getElementById("recoverBtn");
const logoutBtn = document.getElementById("logoutBtn");
const authBox = document.getElementById("authBox");
const userBox = document.getElementById("userBox");
const userEmail = document.getElementById("userEmail");

/* ------- LOGIN -------- */
loginBtn.onclick = async () => {
  try {
    await signInWithEmailAndPassword(auth, email.value, pass.value);
    alert("Inicio de sesi√≥n exitoso");
  } catch (e) {
    alert(e.message);
  }
};

/* ------- REGISTRO -------- */
registerBtn.onclick = async () => {
  try {
    await createUserWithEmailAndPassword(auth, email.value, pass.value);
    alert("Cuenta creada üéâ");
  } catch (e) {
    alert(e.message);
  }
};

/* ------- GOOGLE -------- */
googleBtn.onclick = async () => {
  try {
    await signInWithPopup(auth, new GoogleAuthProvider());
  } catch (e) {
    alert(e.message);
  }
};

/* ------- RECUPERAR CONTRASE√ëA -------- */
recoverBtn.onclick = async () => {
  try {
    await sendPasswordResetEmail(auth, email.value);
    alert("Correo enviado üì©");
  } catch (e) {
    alert(e.message);
  }
};

/* ------- LOGOUT -------- */
logoutBtn.onclick = async () => signOut(auth);

/* ------- SESI√ìN ACTIVA -------- */
onAuthStateChanged(auth, user => {
  if (user) {
    authBox.style.display = "none";
    userBox.style.display = "block";
    userEmail.textContent = user.email;
  } else {
    authBox.style.display = "block";
    userBox.style.display = "none";
  }
});
</script>

</body>
</html>

